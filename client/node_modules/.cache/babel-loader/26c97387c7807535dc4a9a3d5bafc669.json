{"ast":null,"code":"var _jsxFileName = \"/home/vicky/Desktop/intern/comment_system/backend/client/src/components/add-comment.component.js\";\nimport React, { Component } from 'react';\nimport cogoToast from 'cogo-toast';\nimport axios from 'axios';\nexport default class AddComment extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeContent = this.onChangeContent.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      content: '',\n      upvotes: 0,\n      downvotes: 0\n    };\n  }\n\n  onChangeContent(e) {\n    this.setState({\n      content: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const comment = {\n      content: this.state.content\n    };\n    const jwt = sessionStorage.getItem('jwt-token');\n\n    if (jwt === null) {\n      console.log('not logged in');\n      const {\n        hide\n      } = cogoToast.warn('Click to login & comment', {\n        onClick: () => {\n          hide();\n          window.location = '/login';\n        }\n      });\n    } else {\n      const headers = {\n        headers: {\n          Accept: 'application/json',\n          'Content-type': 'application/json',\n          'auth-header': jwt\n        }\n      };\n      axios.post('http://localhost:5000/api/comments/add', comment, headers).then(res => {\n        const json = {\n          type: 'comment'\n        };\n        json.data = res.data;\n        console.log(json);\n        this.props.actions.send(JSON.stringify(json));\n        this.setState({\n          content: ''\n        });\n      }).catch(err => cogoToast.error('Failed adding comment, please try again!', {\n        hideAfter: 5\n      }).then(() => this.setState({\n        content: ''\n      })));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, \"Add a Comment\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      rows: \"5\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.content,\n      placeholder: \"Type a comment\",\n      onChange: this.onChangeContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-danger\",\n      value: \"Post Comment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/vicky/Desktop/intern/comment_system/backend/client/src/components/add-comment.component.js"],"names":["React","Component","cogoToast","axios","AddComment","constructor","props","onChangeContent","bind","onSubmit","state","content","upvotes","downvotes","e","setState","target","value","preventDefault","comment","jwt","sessionStorage","getItem","console","log","hide","warn","onClick","window","location","headers","Accept","post","then","res","json","type","data","actions","send","JSON","stringify","catch","err","error","hideAfter","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cogoToast from 'cogo-toast';\nimport axios from 'axios';\n\nexport default class AddComment extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeContent = this.onChangeContent.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n\n    this.state = {\n      content: '',\n      upvotes: 0,\n      downvotes: 0,\n    };\n  }\n\n  onChangeContent(e) {\n    this.setState({\n      content: e.target.value,\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const comment = {\n      content: this.state.content,\n    };\n    const jwt = sessionStorage.getItem('jwt-token');\n    if (jwt === null) {\n      console.log('not logged in');\n      const { hide } = cogoToast.warn('Click to login & comment', {\n        onClick: () => {\n          hide();\n          window.location = '/login';\n        },\n      });\n    } else {\n      const headers = {\n        headers: {\n          Accept: 'application/json',\n          'Content-type': 'application/json',\n          'auth-header': jwt,\n        },\n      };\n      axios\n        .post('http://localhost:5000/api/comments/add', comment, headers)\n        .then((res) => {\n          const json = { type: 'comment' };\n          json.data = res.data;\n          console.log(json);\n          this.props.actions.send(JSON.stringify(json));\n          this.setState({ content: '' });\n        })\n        .catch((err) =>\n          cogoToast\n            .error('Failed adding comment, please try again!', { hideAfter: 5 })\n            .then(() => this.setState({ content: '' }))\n        );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>Add a Comment</h3>\n        <form onSubmit={this.onSubmit}>\n          <div className='form-group'>\n            <textarea\n              rows='5'\n              required\n              className='form-control'\n              value={this.state.content}\n              placeholder='Type a comment'\n              onChange={this.onChangeContent}\n            ></textarea>\n          </div>\n          <div className='form-group' align='right'>\n            <input\n              type='submit'\n              className='btn btn-danger'\n              value='Post Comment'\n            ></input>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}